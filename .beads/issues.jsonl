{"id":"nostr-effect-997","title":"Epic: Expand effect-layer test coverage for NIPs","description":"Ensure all core NIP services and modules have Effect-level tests that mirror the wrappers/pure helpers. Start by auditing coverage and scheduling work items for each missing NIP.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-01T22:37:32.631011-06:00","updated_at":"2025-12-01T22:37:32.631011-06:00"}
{"id":"nostr-effect-997.1","title":"Test Nip05Service effect layer","description":"Nip05Service only has regex coverage in src/client/Nip05Service.test.ts – the Effect implementation that fetches /.well-known/nostr.json isn’t exercised yet. Add Bun tests with mocked fetch to cover success, fetch error, invalid identifier, and parse failure so we can trust the service layer.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T22:37:46.170843-06:00","updated_at":"2025-12-01T22:37:50.590732-06:00","dependencies":[{"issue_id":"nostr-effect-997.1","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-01T22:37:46.171324-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.2","title":"Test relay NIP modules","description":"Only `src/relay/core/nip/modules/Nip42Module.test.ts` exists; the other modules (Nip16, Nip28, Nip50, etc.) have no direct tests. Add Bun/Effect tests that exercise each module’s hooks/policies (replaceable deletes, command handling, relay info limits) so regressions surface quickly.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T22:37:55.155833-06:00","updated_at":"2025-12-01T22:37:55.155833-06:00","dependencies":[{"issue_id":"nostr-effect-997.2","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-01T22:37:55.156248-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.3","title":"Audit effect service vs wrapper tests","description":"While browsing `src/wrappers`, most NIP tests target the Promise helpers there but many corresponding Effect services (under `src/client` or `src/relay/core`) are untested. Catalog which services lack an `Effect.runPromise` test harness, starting with the `Nip05Service` fetch logic, and schedule follow-ups for the missing ones. This will feed back into the epic so we know what to focus on.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T22:38:07.658998-06:00","updated_at":"2025-12-01T22:38:07.658998-06:00","dependencies":[{"issue_id":"nostr-effect-997.3","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-01T22:38:07.659396-06:00","created_by":"daemon"}]}
