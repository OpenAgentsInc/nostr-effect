{"id":"nostr-effect-997","title":"Epic: Expand effect-layer test coverage for NIPs","description":"Ensure all core NIP services and modules have Effect-level tests that mirror the wrappers/pure helpers. Start by auditing coverage and scheduling work items for each missing NIP.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-01T22:37:32.631011-06:00","updated_at":"2025-12-01T22:37:32.631011-06:00"}
{"id":"nostr-effect-997.1","title":"Test Nip05Service effect layer","description":"Nip05Service only has regex coverage in src/client/Nip05Service.test.ts – the Effect implementation that fetches /.well-known/nostr.json isn’t exercised yet. Add Bun tests with mocked fetch to cover success, fetch error, invalid identifier, and parse failure so we can trust the service layer.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T22:37:46.170843-06:00","updated_at":"2025-12-02T09:23:13.982774-06:00","closed_at":"2025-12-02T09:23:13.982774-06:00","close_reason":"Completed: Added Effect-level tests for Nip05Service with fetch mocking","dependencies":[{"issue_id":"nostr-effect-997.1","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-01T22:37:46.171324-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.2","title":"Test relay NIP modules","description":"Only `src/relay/core/nip/modules/Nip42Module.test.ts` exists; the other modules (Nip16, Nip28, Nip50, etc.) have no direct tests. Add Bun/Effect tests that exercise each module’s hooks/policies (replaceable deletes, command handling, relay info limits) so regressions surface quickly.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-01T22:37:55.155833-06:00","updated_at":"2025-12-02T09:35:25.157764-06:00","close_reason":"Completed: Added tests for relay NIP modules (Nip01, Nip11, Nip16, Nip28, Nip50)","dependencies":[{"issue_id":"nostr-effect-997.2","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-01T22:37:55.156248-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.3","title":"Audit effect service vs wrapper tests","description":"While browsing `src/wrappers`, most NIP tests target the Promise helpers there but many corresponding Effect services (under `src/client` or `src/relay/core`) are untested. Catalog which services lack an `Effect.runPromise` test harness, starting with the `Nip05Service` fetch logic, and schedule follow-ups for the missing ones. This will feed back into the epic so we know what to focus on.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-01T22:38:07.658998-06:00","updated_at":"2025-12-02T09:34:16.720979-06:00","dependencies":[{"issue_id":"nostr-effect-997.3","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-01T22:38:07.659396-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.4","title":"Test Nip17Service effect layer","description":"Nip17Service handles poast thread fetching. Mirror nip17/nip10 pure tests with Effect.runPromise(service.fetchThread(eventId)) covering success, 404, parse errors. Mock fetch.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-02T09:37:03.542416-06:00","updated_at":"2025-12-02T09:37:03.542416-06:00","dependencies":[{"issue_id":"nostr-effect-997.4","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-02T09:37:03.54395-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.5","title":"Test Nip25Service effect layer","description":"Nip25Service zap reactions. Add Effect tests for reaction parsing with mocked events, verify counts/aggregation mirror nip25 pure helpers.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-02T09:37:03.619913-06:00","updated_at":"2025-12-02T09:37:03.619913-06:00","dependencies":[{"issue_id":"nostr-effect-997.5","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-02T09:37:03.622211-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.6","title":"Test Nip51Service effect layer","description":"Nip51Service lists. Effect tests for list parsing/filtering, mirror nip84/nip51 wrappers with event sets.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-02T09:37:03.692964-06:00","updated_at":"2025-12-02T09:37:03.692964-06:00","dependencies":[{"issue_id":"nostr-effect-997.6","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-02T09:37:03.694183-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.7","title":"Test Nip58Service effect layer","description":"Nip58Service badges. Effect tests for badge fetch/parse/validate, mock NIP-58 JSON.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-02T09:37:03.760869-06:00","updated_at":"2025-12-02T09:37:03.760869-06:00","dependencies":[{"issue_id":"nostr-effect-997.7","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-02T09:37:03.762857-06:00","created_by":"daemon"}]}
{"id":"nostr-effect-997.8","title":"Test remaining relay NIP modules","description":"Add Effect tests for untested modules: Nip09Module, Nip15, Nip20, Nip40, Nip45, Nip57, Nip62, Nip70, Nip77, Nip86, NipA0Module, NipB0Module. Focus on policy/hook coverage.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-02T09:37:03.82829-06:00","updated_at":"2025-12-02T09:37:03.82829-06:00","dependencies":[{"issue_id":"nostr-effect-997.8","depends_on_id":"nostr-effect-997","type":"parent-child","created_at":"2025-12-02T09:37:03.82954-06:00","created_by":"daemon"}]}
